{"dependencies":[{"name":"zustand","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":33,"index":33}}],"key":"POPvx7yS3Y3wz+S/9OAefiXNs0Q=","exportNames":["*"],"imports":1}},{"name":"@react-native-async-storage/async-storage","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":35},"end":{"line":2,"column":69,"index":104}}],"key":"0kSRlooyBOaYM9tlTtK91nq+uds=","exportNames":["*"],"imports":1}},{"name":"expo-router","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":106},"end":{"line":3,"column":37,"index":143}}],"key":"/+ErnBisjrT6aDU+GRp5Qz/lYoY=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  Object.defineProperty(exports, \"useAuthStore\", {\n    enumerable: true,\n    get: function () {\n      return useAuthStore;\n    }\n  });\n  var _zustand = require(_dependencyMap[0], \"zustand\");\n  var _reactNativeAsyncStorageAsyncStorage = require(_dependencyMap[1], \"@react-native-async-storage/async-storage\");\n  var AsyncStorage = _interopDefault(_reactNativeAsyncStorageAsyncStorage);\n  var _expoRouter = require(_dependencyMap[2], \"expo-router\");\n  const useAuthStore = (0, _zustand.create)(set => ({\n    user: null,\n    university: null,\n    token: null,\n    isLoading: true,\n    isAuthenticated: false,\n    setUser: async (user, token, university) => {\n      if (token) await AsyncStorage.default.setItem('authToken', token);\n      await AsyncStorage.default.setItem('user', JSON.stringify(user));\n      if (university) await AsyncStorage.default.setItem('university', JSON.stringify(university));\n      set({\n        user,\n        token,\n        university,\n        isAuthenticated: true,\n        isLoading: false\n      });\n    },\n    logout: async () => {\n      try {\n        const token = await AsyncStorage.default.getItem('authToken');\n        console.log('Logout started, token exists:', !!token);\n\n        // Call backend logout API to invalidate token\n        if (token) {\n          try {\n            // Use localhost for both - backend handles CORS\n            const response = await fetch('http://localhost:8001/api/auth/logout', {\n              method: 'POST',\n              headers: {\n                'Content-Type': 'application/json',\n                'Authorization': `Bearer ${token}`\n              }\n            });\n            console.log('Logout API response:', response.status);\n          } catch (apiError) {\n            console.log('Backend logout error (non-blocking):', apiError);\n          }\n        }\n\n        // Clear all stored data\n        await AsyncStorage.default.removeItem('authToken');\n        await AsyncStorage.default.removeItem('user');\n        await AsyncStorage.default.removeItem('university');\n        console.log('Cleared AsyncStorage');\n\n        // Reset zustand state\n        set({\n          user: null,\n          token: null,\n          university: null,\n          isAuthenticated: false,\n          isLoading: false\n        });\n        console.log('State reset complete');\n\n        // Reset navigation stack\n        setTimeout(() => {\n          _expoRouter.router.replace('/auth/login');\n        }, 100);\n      } catch (error) {\n        console.error('Logout Error:', error);\n        throw error;\n      }\n    },\n    updateUser: updatedUser => {\n      set(state => ({\n        user: state.user ? {\n          ...state.user,\n          ...updatedUser\n        } : null\n      }));\n    },\n    loadFromStorage: async () => {\n      try {\n        const token = await AsyncStorage.default.getItem('authToken');\n        const userJson = await AsyncStorage.default.getItem('user');\n        const universityJson = await AsyncStorage.default.getItem('university');\n        if (token && userJson && universityJson) {\n          const user = JSON.parse(userJson);\n          const university = JSON.parse(universityJson);\n          set({\n            user,\n            token,\n            university,\n            isAuthenticated: true,\n            isLoading: false\n          });\n        } else {\n          set({\n            isLoading: false\n          });\n        }\n      } catch (error) {\n        console.error('Error loading from storage:', error);\n        set({\n          isLoading: false\n        });\n      }\n    }\n  }));\n});","lineCount":123,"map":[[12,2,39,0,"Object"],[12,8,39,0],[12,9,39,0,"defineProperty"],[12,23,39,0],[12,24,39,0,"exports"],[12,31,39,0],[13,4,39,0,"enumerable"],[13,14,39,0],[14,4,39,0,"get"],[14,7,39,0],[14,18,39,0,"get"],[14,19,39,0],[15,6,39,0],[15,13,39,0,"useAuthStore"],[15,25,39,0],[16,4,39,0],[17,2,39,0],[18,2,1,0],[18,6,1,0,"_zustand"],[18,14,1,0],[18,17,1,0,"require"],[18,24,1,0],[18,25,1,0,"_dependencyMap"],[18,39,1,0],[19,2,2,0],[19,6,2,0,"_reactNativeAsyncStorageAsyncStorage"],[19,42,2,0],[19,45,2,0,"require"],[19,52,2,0],[19,53,2,0,"_dependencyMap"],[19,67,2,0],[20,2,2,0],[20,6,2,0,"AsyncStorage"],[20,18,2,0],[20,21,2,0,"_interopDefault"],[20,36,2,0],[20,37,2,0,"_reactNativeAsyncStorageAsyncStorage"],[20,73,2,0],[21,2,3,0],[21,6,3,0,"_expoRouter"],[21,17,3,0],[21,20,3,0,"require"],[21,27,3,0],[21,28,3,0,"_dependencyMap"],[21,42,3,0],[22,2,39,7],[22,8,39,13,"useAuthStore"],[22,20,39,25],[22,23,39,28],[22,27,39,28,"create"],[22,35,39,34],[22,36,39,34,"create"],[22,42,39,34],[22,44,39,47,"set"],[22,47,39,50],[22,52,39,56],[23,4,40,2,"user"],[23,8,40,6],[23,10,40,8],[23,14,40,12],[24,4,41,2,"university"],[24,14,41,12],[24,16,41,14],[24,20,41,18],[25,4,42,2,"token"],[25,9,42,7],[25,11,42,9],[25,15,42,13],[26,4,43,2,"isLoading"],[26,13,43,11],[26,15,43,13],[26,19,43,17],[27,4,44,2,"isAuthenticated"],[27,19,44,17],[27,21,44,19],[27,26,44,24],[28,4,46,2,"setUser"],[28,11,46,9],[28,13,46,11],[28,19,46,11,"setUser"],[28,20,46,18,"user"],[28,24,46,22],[28,26,46,24,"token"],[28,31,46,29],[28,33,46,31,"university"],[28,43,46,41],[28,48,46,46],[29,6,47,4],[29,10,47,8,"token"],[29,15,47,13],[29,17,47,15],[29,23,47,21,"AsyncStorage"],[29,35,47,33],[29,36,47,33,"default"],[29,43,47,33],[29,44,47,34,"setItem"],[29,51,47,41],[29,52,47,42],[29,63,47,53],[29,65,47,55,"token"],[29,70,47,60],[29,71,47,61],[30,6,48,4],[30,12,48,10,"AsyncStorage"],[30,24,48,22],[30,25,48,22,"default"],[30,32,48,22],[30,33,48,23,"setItem"],[30,40,48,30],[30,41,48,31],[30,47,48,37],[30,49,48,39,"JSON"],[30,53,48,43],[30,54,48,44,"stringify"],[30,63,48,53],[30,64,48,54,"user"],[30,68,48,58],[30,69,48,59],[30,70,48,60],[31,6,49,4],[31,10,49,8,"university"],[31,20,49,18],[31,22,49,20],[31,28,49,26,"AsyncStorage"],[31,40,49,38],[31,41,49,38,"default"],[31,48,49,38],[31,49,49,39,"setItem"],[31,56,49,46],[31,57,49,47],[31,69,49,59],[31,71,49,61,"JSON"],[31,75,49,65],[31,76,49,66,"stringify"],[31,85,49,75],[31,86,49,76,"university"],[31,96,49,86],[31,97,49,87],[31,98,49,88],[32,6,51,4,"set"],[32,9,51,7],[32,10,51,8],[33,8,52,6,"user"],[33,12,52,10],[34,8,53,6,"token"],[34,13,53,11],[35,8,54,6,"university"],[35,18,54,16],[36,8,55,6,"isAuthenticated"],[36,23,55,21],[36,25,55,23],[36,29,55,27],[37,8,56,6,"isLoading"],[37,17,56,15],[37,19,56,17],[38,6,57,4],[38,7,57,5],[38,8,57,6],[39,4,58,2],[39,5,58,3],[40,4,60,2,"logout"],[40,10,60,8],[40,12,60,10],[40,18,60,10,"logout"],[40,19,60,10],[40,24,60,22],[41,6,61,4],[41,10,61,8],[42,8,62,6],[42,14,62,12,"token"],[42,19,62,17],[42,22,62,20],[42,28,62,26,"AsyncStorage"],[42,40,62,38],[42,41,62,38,"default"],[42,48,62,38],[42,49,62,39,"getItem"],[42,56,62,46],[42,57,62,47],[42,68,62,58],[42,69,62,59],[43,8,63,6,"console"],[43,15,63,13],[43,16,63,14,"log"],[43,19,63,17],[43,20,63,18],[43,51,63,49],[43,53,63,51],[43,54,63,52],[43,55,63,53,"token"],[43,60,63,58],[43,61,63,59],[45,8,65,6],[46,8,66,6],[46,12,66,10,"token"],[46,17,66,15],[46,19,66,17],[47,10,67,8],[47,14,67,12],[48,12,68,10],[49,12,69,10],[49,18,69,16,"response"],[49,26,69,24],[49,29,69,27],[49,35,69,33,"fetch"],[49,40,69,38],[49,41,69,39],[49,80,69,78],[49,82,69,80],[50,14,70,12,"method"],[50,20,70,18],[50,22,70,20],[50,28,70,26],[51,14,71,12,"headers"],[51,21,71,19],[51,23,71,21],[52,16,72,14],[52,30,72,28],[52,32,72,30],[52,50,72,48],[53,16,73,14],[53,31,73,29],[53,33,73,31],[53,43,73,41,"token"],[53,48,73,46],[54,14,74,12],[55,12,75,10],[55,13,75,11],[55,14,75,12],[56,12,76,10,"console"],[56,19,76,17],[56,20,76,18,"log"],[56,23,76,21],[56,24,76,22],[56,46,76,44],[56,48,76,46,"response"],[56,56,76,54],[56,57,76,55,"status"],[56,63,76,61],[56,64,76,62],[57,10,77,8],[57,11,77,9],[57,12,77,10],[57,19,77,17,"apiError"],[57,27,77,25],[57,29,77,27],[58,12,78,10,"console"],[58,19,78,17],[58,20,78,18,"log"],[58,23,78,21],[58,24,78,22],[58,62,78,60],[58,64,78,62,"apiError"],[58,72,78,70],[58,73,78,71],[59,10,79,8],[60,8,80,6],[62,8,82,6],[63,8,83,6],[63,14,83,12,"AsyncStorage"],[63,26,83,24],[63,27,83,24,"default"],[63,34,83,24],[63,35,83,25,"removeItem"],[63,45,83,35],[63,46,83,36],[63,57,83,47],[63,58,83,48],[64,8,84,6],[64,14,84,12,"AsyncStorage"],[64,26,84,24],[64,27,84,24,"default"],[64,34,84,24],[64,35,84,25,"removeItem"],[64,45,84,35],[64,46,84,36],[64,52,84,42],[64,53,84,43],[65,8,85,6],[65,14,85,12,"AsyncStorage"],[65,26,85,24],[65,27,85,24,"default"],[65,34,85,24],[65,35,85,25,"removeItem"],[65,45,85,35],[65,46,85,36],[65,58,85,48],[65,59,85,49],[66,8,86,6,"console"],[66,15,86,13],[66,16,86,14,"log"],[66,19,86,17],[66,20,86,18],[66,42,86,40],[66,43,86,41],[68,8,88,6],[69,8,89,6,"set"],[69,11,89,9],[69,12,89,10],[70,10,90,8,"user"],[70,14,90,12],[70,16,90,14],[70,20,90,18],[71,10,91,8,"token"],[71,15,91,13],[71,17,91,15],[71,21,91,19],[72,10,92,8,"university"],[72,20,92,18],[72,22,92,20],[72,26,92,24],[73,10,93,8,"isAuthenticated"],[73,25,93,23],[73,27,93,25],[73,32,93,30],[74,10,94,8,"isLoading"],[74,19,94,17],[74,21,94,19],[75,8,95,6],[75,9,95,7],[75,10,95,8],[76,8,96,6,"console"],[76,15,96,13],[76,16,96,14,"log"],[76,19,96,17],[76,20,96,18],[76,42,96,40],[76,43,96,41],[78,8,98,6],[79,8,99,6,"setTimeout"],[79,18,99,16],[79,19,99,17],[79,25,99,23],[80,10,100,8,"router"],[80,21,100,14],[80,22,100,14,"router"],[80,28,100,14],[80,29,100,15,"replace"],[80,36,100,22],[80,37,100,23],[80,50,100,36],[80,51,100,37],[81,8,101,6],[81,9,101,7],[81,11,101,9],[81,14,101,12],[81,15,101,13],[82,6,103,4],[82,7,103,5],[82,8,103,6],[82,15,103,13,"error"],[82,20,103,18],[82,22,103,20],[83,8,104,6,"console"],[83,15,104,13],[83,16,104,14,"error"],[83,21,104,19],[83,22,104,20],[83,37,104,35],[83,39,104,37,"error"],[83,44,104,42],[83,45,104,43],[84,8,105,6],[84,14,105,12,"error"],[84,19,105,17],[85,6,106,4],[86,4,107,2],[86,5,107,3],[87,4,109,2,"updateUser"],[87,14,109,12],[87,16,109,15,"updatedUser"],[87,27,109,26],[87,31,109,31],[88,6,110,4,"set"],[88,9,110,7],[88,10,110,9,"state"],[88,15,110,14],[88,20,110,20],[89,8,111,6,"user"],[89,12,111,10],[89,14,111,12,"state"],[89,19,111,17],[89,20,111,18,"user"],[89,24,111,22],[89,27,111,25],[90,10,111,27],[90,13,111,30,"state"],[90,18,111,35],[90,19,111,36,"user"],[90,23,111,40],[91,10,111,42],[91,13,111,45,"updatedUser"],[92,8,111,57],[92,9,111,58],[92,12,111,61],[93,6,112,4],[93,7,112,5],[93,8,112,6],[93,9,112,7],[94,4,113,2],[94,5,113,3],[95,4,115,2,"loadFromStorage"],[95,19,115,17],[95,21,115,19],[95,27,115,19,"loadFromStorage"],[95,28,115,19],[95,33,115,31],[96,6,116,4],[96,10,116,8],[97,8,117,6],[97,14,117,12,"token"],[97,19,117,17],[97,22,117,20],[97,28,117,26,"AsyncStorage"],[97,40,117,38],[97,41,117,38,"default"],[97,48,117,38],[97,49,117,39,"getItem"],[97,56,117,46],[97,57,117,47],[97,68,117,58],[97,69,117,59],[98,8,118,6],[98,14,118,12,"userJson"],[98,22,118,20],[98,25,118,23],[98,31,118,29,"AsyncStorage"],[98,43,118,41],[98,44,118,41,"default"],[98,51,118,41],[98,52,118,42,"getItem"],[98,59,118,49],[98,60,118,50],[98,66,118,56],[98,67,118,57],[99,8,119,6],[99,14,119,12,"universityJson"],[99,28,119,26],[99,31,119,29],[99,37,119,35,"AsyncStorage"],[99,49,119,47],[99,50,119,47,"default"],[99,57,119,47],[99,58,119,48,"getItem"],[99,65,119,55],[99,66,119,56],[99,78,119,68],[99,79,119,69],[100,8,121,6],[100,12,121,10,"token"],[100,17,121,15],[100,21,121,19,"userJson"],[100,29,121,27],[100,33,121,31,"universityJson"],[100,47,121,45],[100,49,121,47],[101,10,122,8],[101,16,122,14,"user"],[101,20,122,18],[101,23,122,21,"JSON"],[101,27,122,25],[101,28,122,26,"parse"],[101,33,122,31],[101,34,122,32,"userJson"],[101,42,122,40],[101,43,122,41],[102,10,123,8],[102,16,123,14,"university"],[102,26,123,24],[102,29,123,27,"JSON"],[102,33,123,31],[102,34,123,32,"parse"],[102,39,123,37],[102,40,123,38,"universityJson"],[102,54,123,52],[102,55,123,53],[103,10,125,8,"set"],[103,13,125,11],[103,14,125,12],[104,12,126,10,"user"],[104,16,126,14],[105,12,127,10,"token"],[105,17,127,15],[106,12,128,10,"university"],[106,22,128,20],[107,12,129,10,"isAuthenticated"],[107,27,129,25],[107,29,129,27],[107,33,129,31],[108,12,130,10,"isLoading"],[108,21,130,19],[108,23,130,21],[109,10,131,8],[109,11,131,9],[109,12,131,10],[110,8,132,6],[110,9,132,7],[110,15,132,13],[111,10,133,8,"set"],[111,13,133,11],[111,14,133,12],[112,12,133,14,"isLoading"],[112,21,133,23],[112,23,133,25],[113,10,133,31],[113,11,133,32],[113,12,133,33],[114,8,134,6],[115,6,135,4],[115,7,135,5],[115,8,135,6],[115,15,135,13,"error"],[115,20,135,18],[115,22,135,20],[116,8,136,6,"console"],[116,15,136,13],[116,16,136,14,"error"],[116,21,136,19],[116,22,136,20],[116,51,136,49],[116,53,136,51,"error"],[116,58,136,56],[116,59,136,57],[117,8,137,6,"set"],[117,11,137,9],[117,12,137,10],[118,10,137,12,"isLoading"],[118,19,137,21],[118,21,137,23],[119,8,137,29],[119,9,137,30],[119,10,137,31],[120,6,138,4],[121,4,139,2],[122,2,140,0],[122,3,140,1],[122,4,140,2],[122,5,140,3],[123,0,140,4],[123,3]],"functionMap":{"names":["<global>","create$argument_0","setUser","logout","setTimeout$argument_0","updateUser","set$argument_0","loadFromStorage"],"mappings":"AAA;8CCsC;WCO;GDY;UEE;iBCuC;ODE;GFM;cIE;QCC;MDE;GJC;mBME;GNwB;EDC"},"hasCjsExports":false},"type":"js/module"}]}