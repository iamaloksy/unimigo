{"dependencies":[{"name":"zustand","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":33,"index":33}}],"key":"POPvx7yS3Y3wz+S/9OAefiXNs0Q=","exportNames":["*"],"imports":1}},{"name":"@react-native-async-storage/async-storage","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":35},"end":{"line":2,"column":69,"index":104}}],"key":"0kSRlooyBOaYM9tlTtK91nq+uds=","exportNames":["*"],"imports":1}},{"name":"expo-router","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":106},"end":{"line":3,"column":37,"index":143}}],"key":"/+ErnBisjrT6aDU+GRp5Qz/lYoY=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  Object.defineProperty(exports, \"useAuthStore\", {\n    enumerable: true,\n    get: function () {\n      return useAuthStore;\n    }\n  });\n  var _zustand = require(_dependencyMap[0], \"zustand\");\n  var _reactNativeAsyncStorageAsyncStorage = require(_dependencyMap[1], \"@react-native-async-storage/async-storage\");\n  var AsyncStorage = _interopDefault(_reactNativeAsyncStorageAsyncStorage);\n  var _expoRouter = require(_dependencyMap[2], \"expo-router\");\n  const useAuthStore = (0, _zustand.create)(set => ({\n    user: null,\n    university: null,\n    token: null,\n    isLoading: true,\n    isAuthenticated: false,\n    setUser: async (user, token, university) => {\n      if (token) await AsyncStorage.default.setItem('authToken', token);\n      await AsyncStorage.default.setItem('user', JSON.stringify(user));\n      if (university) await AsyncStorage.default.setItem('university', JSON.stringify(university));\n      set({\n        user,\n        token,\n        university,\n        isAuthenticated: true,\n        isLoading: false\n      });\n    },\n    logout: async () => {\n      try {\n        const token = await AsyncStorage.default.getItem('authToken');\n\n        // Call backend logout API to invalidate token\n        if (token) {\n          try {\n            await fetch('http://localhost:8001/api/auth/logout', {\n              method: 'POST',\n              headers: {\n                'Content-Type': 'application/json',\n                'Authorization': `Bearer ${token}`\n              }\n            });\n          } catch (apiError) {\n            console.log('Backend logout error:', apiError);\n          }\n        }\n\n        // Clear all stored data\n        await AsyncStorage.default.removeItem('authToken');\n        await AsyncStorage.default.removeItem('user');\n        await AsyncStorage.default.removeItem('university');\n\n        // Reset zustand state\n        set({\n          user: null,\n          token: null,\n          university: null,\n          isAuthenticated: false,\n          isLoading: false\n        });\n\n        // Reset navigation stack\n        _expoRouter.router.replace('/auth/login');\n      } catch (error) {\n        console.log('Logout Error:', error);\n      }\n    },\n    updateUser: updatedUser => {\n      set(state => ({\n        user: state.user ? {\n          ...state.user,\n          ...updatedUser\n        } : null\n      }));\n    },\n    loadFromStorage: async () => {\n      try {\n        const token = await AsyncStorage.default.getItem('authToken');\n        const userJson = await AsyncStorage.default.getItem('user');\n        const universityJson = await AsyncStorage.default.getItem('university');\n        if (token && userJson && universityJson) {\n          const user = JSON.parse(userJson);\n          const university = JSON.parse(universityJson);\n          set({\n            user,\n            token,\n            university,\n            isAuthenticated: true,\n            isLoading: false\n          });\n        } else {\n          set({\n            isLoading: false\n          });\n        }\n      } catch (error) {\n        console.error('Error loading from storage:', error);\n        set({\n          isLoading: false\n        });\n      }\n    }\n  }));\n});","lineCount":115,"map":[[12,2,38,0,"Object"],[12,8,38,0],[12,9,38,0,"defineProperty"],[12,23,38,0],[12,24,38,0,"exports"],[12,31,38,0],[13,4,38,0,"enumerable"],[13,14,38,0],[14,4,38,0,"get"],[14,7,38,0],[14,18,38,0,"get"],[14,19,38,0],[15,6,38,0],[15,13,38,0,"useAuthStore"],[15,25,38,0],[16,4,38,0],[17,2,38,0],[18,2,1,0],[18,6,1,0,"_zustand"],[18,14,1,0],[18,17,1,0,"require"],[18,24,1,0],[18,25,1,0,"_dependencyMap"],[18,39,1,0],[19,2,2,0],[19,6,2,0,"_reactNativeAsyncStorageAsyncStorage"],[19,42,2,0],[19,45,2,0,"require"],[19,52,2,0],[19,53,2,0,"_dependencyMap"],[19,67,2,0],[20,2,2,0],[20,6,2,0,"AsyncStorage"],[20,18,2,0],[20,21,2,0,"_interopDefault"],[20,36,2,0],[20,37,2,0,"_reactNativeAsyncStorageAsyncStorage"],[20,73,2,0],[21,2,3,0],[21,6,3,0,"_expoRouter"],[21,17,3,0],[21,20,3,0,"require"],[21,27,3,0],[21,28,3,0,"_dependencyMap"],[21,42,3,0],[22,2,38,7],[22,8,38,13,"useAuthStore"],[22,20,38,25],[22,23,38,28],[22,27,38,28,"create"],[22,35,38,34],[22,36,38,34,"create"],[22,42,38,34],[22,44,38,47,"set"],[22,47,38,50],[22,52,38,56],[23,4,39,2,"user"],[23,8,39,6],[23,10,39,8],[23,14,39,12],[24,4,40,2,"university"],[24,14,40,12],[24,16,40,14],[24,20,40,18],[25,4,41,2,"token"],[25,9,41,7],[25,11,41,9],[25,15,41,13],[26,4,42,2,"isLoading"],[26,13,42,11],[26,15,42,13],[26,19,42,17],[27,4,43,2,"isAuthenticated"],[27,19,43,17],[27,21,43,19],[27,26,43,24],[28,4,45,2,"setUser"],[28,11,45,9],[28,13,45,11],[28,19,45,11,"setUser"],[28,20,45,18,"user"],[28,24,45,22],[28,26,45,24,"token"],[28,31,45,29],[28,33,45,31,"university"],[28,43,45,41],[28,48,45,46],[29,6,46,4],[29,10,46,8,"token"],[29,15,46,13],[29,17,46,15],[29,23,46,21,"AsyncStorage"],[29,35,46,33],[29,36,46,33,"default"],[29,43,46,33],[29,44,46,34,"setItem"],[29,51,46,41],[29,52,46,42],[29,63,46,53],[29,65,46,55,"token"],[29,70,46,60],[29,71,46,61],[30,6,47,4],[30,12,47,10,"AsyncStorage"],[30,24,47,22],[30,25,47,22,"default"],[30,32,47,22],[30,33,47,23,"setItem"],[30,40,47,30],[30,41,47,31],[30,47,47,37],[30,49,47,39,"JSON"],[30,53,47,43],[30,54,47,44,"stringify"],[30,63,47,53],[30,64,47,54,"user"],[30,68,47,58],[30,69,47,59],[30,70,47,60],[31,6,48,4],[31,10,48,8,"university"],[31,20,48,18],[31,22,48,20],[31,28,48,26,"AsyncStorage"],[31,40,48,38],[31,41,48,38,"default"],[31,48,48,38],[31,49,48,39,"setItem"],[31,56,48,46],[31,57,48,47],[31,69,48,59],[31,71,48,61,"JSON"],[31,75,48,65],[31,76,48,66,"stringify"],[31,85,48,75],[31,86,48,76,"university"],[31,96,48,86],[31,97,48,87],[31,98,48,88],[32,6,50,4,"set"],[32,9,50,7],[32,10,50,8],[33,8,51,6,"user"],[33,12,51,10],[34,8,52,6,"token"],[34,13,52,11],[35,8,53,6,"university"],[35,18,53,16],[36,8,54,6,"isAuthenticated"],[36,23,54,21],[36,25,54,23],[36,29,54,27],[37,8,55,6,"isLoading"],[37,17,55,15],[37,19,55,17],[38,6,56,4],[38,7,56,5],[38,8,56,6],[39,4,57,2],[39,5,57,3],[40,4,59,2,"logout"],[40,10,59,8],[40,12,59,10],[40,18,59,10,"logout"],[40,19,59,10],[40,24,59,22],[41,6,60,4],[41,10,60,8],[42,8,61,6],[42,14,61,12,"token"],[42,19,61,17],[42,22,61,20],[42,28,61,26,"AsyncStorage"],[42,40,61,38],[42,41,61,38,"default"],[42,48,61,38],[42,49,61,39,"getItem"],[42,56,61,46],[42,57,61,47],[42,68,61,58],[42,69,61,59],[44,8,63,6],[45,8,64,6],[45,12,64,10,"token"],[45,17,64,15],[45,19,64,17],[46,10,65,8],[46,14,65,12],[47,12,66,10],[47,18,66,16,"fetch"],[47,23,66,21],[47,24,66,22],[47,63,66,61],[47,65,66,63],[48,14,67,12,"method"],[48,20,67,18],[48,22,67,20],[48,28,67,26],[49,14,68,12,"headers"],[49,21,68,19],[49,23,68,21],[50,16,69,14],[50,30,69,28],[50,32,69,30],[50,50,69,48],[51,16,70,14],[51,31,70,29],[51,33,70,31],[51,43,70,41,"token"],[51,48,70,46],[52,14,71,12],[53,12,72,10],[53,13,72,11],[53,14,72,12],[54,10,73,8],[54,11,73,9],[54,12,73,10],[54,19,73,17,"apiError"],[54,27,73,25],[54,29,73,27],[55,12,74,10,"console"],[55,19,74,17],[55,20,74,18,"log"],[55,23,74,21],[55,24,74,22],[55,47,74,45],[55,49,74,47,"apiError"],[55,57,74,55],[55,58,74,56],[56,10,75,8],[57,8,76,6],[59,8,78,6],[60,8,79,6],[60,14,79,12,"AsyncStorage"],[60,26,79,24],[60,27,79,24,"default"],[60,34,79,24],[60,35,79,25,"removeItem"],[60,45,79,35],[60,46,79,36],[60,57,79,47],[60,58,79,48],[61,8,80,6],[61,14,80,12,"AsyncStorage"],[61,26,80,24],[61,27,80,24,"default"],[61,34,80,24],[61,35,80,25,"removeItem"],[61,45,80,35],[61,46,80,36],[61,52,80,42],[61,53,80,43],[62,8,81,6],[62,14,81,12,"AsyncStorage"],[62,26,81,24],[62,27,81,24,"default"],[62,34,81,24],[62,35,81,25,"removeItem"],[62,45,81,35],[62,46,81,36],[62,58,81,48],[62,59,81,49],[64,8,83,6],[65,8,84,6,"set"],[65,11,84,9],[65,12,84,10],[66,10,85,8,"user"],[66,14,85,12],[66,16,85,14],[66,20,85,18],[67,10,86,8,"token"],[67,15,86,13],[67,17,86,15],[67,21,86,19],[68,10,87,8,"university"],[68,20,87,18],[68,22,87,20],[68,26,87,24],[69,10,88,8,"isAuthenticated"],[69,25,88,23],[69,27,88,25],[69,32,88,30],[70,10,89,8,"isLoading"],[70,19,89,17],[70,21,89,19],[71,8,90,6],[71,9,90,7],[71,10,90,8],[73,8,92,6],[74,8,93,6,"router"],[74,19,93,12],[74,20,93,12,"router"],[74,26,93,12],[74,27,93,13,"replace"],[74,34,93,20],[74,35,93,21],[74,48,93,34],[74,49,93,35],[75,6,94,4],[75,7,94,5],[75,8,94,6],[75,15,94,13,"error"],[75,20,94,18],[75,22,94,20],[76,8,95,6,"console"],[76,15,95,13],[76,16,95,14,"log"],[76,19,95,17],[76,20,95,18],[76,35,95,33],[76,37,95,35,"error"],[76,42,95,40],[76,43,95,41],[77,6,96,4],[78,4,97,2],[78,5,97,3],[79,4,99,2,"updateUser"],[79,14,99,12],[79,16,99,15,"updatedUser"],[79,27,99,26],[79,31,99,31],[80,6,100,4,"set"],[80,9,100,7],[80,10,100,9,"state"],[80,15,100,14],[80,20,100,20],[81,8,101,6,"user"],[81,12,101,10],[81,14,101,12,"state"],[81,19,101,17],[81,20,101,18,"user"],[81,24,101,22],[81,27,101,25],[82,10,101,27],[82,13,101,30,"state"],[82,18,101,35],[82,19,101,36,"user"],[82,23,101,40],[83,10,101,42],[83,13,101,45,"updatedUser"],[84,8,101,57],[84,9,101,58],[84,12,101,61],[85,6,102,4],[85,7,102,5],[85,8,102,6],[85,9,102,7],[86,4,103,2],[86,5,103,3],[87,4,105,2,"loadFromStorage"],[87,19,105,17],[87,21,105,19],[87,27,105,19,"loadFromStorage"],[87,28,105,19],[87,33,105,31],[88,6,106,4],[88,10,106,8],[89,8,107,6],[89,14,107,12,"token"],[89,19,107,17],[89,22,107,20],[89,28,107,26,"AsyncStorage"],[89,40,107,38],[89,41,107,38,"default"],[89,48,107,38],[89,49,107,39,"getItem"],[89,56,107,46],[89,57,107,47],[89,68,107,58],[89,69,107,59],[90,8,108,6],[90,14,108,12,"userJson"],[90,22,108,20],[90,25,108,23],[90,31,108,29,"AsyncStorage"],[90,43,108,41],[90,44,108,41,"default"],[90,51,108,41],[90,52,108,42,"getItem"],[90,59,108,49],[90,60,108,50],[90,66,108,56],[90,67,108,57],[91,8,109,6],[91,14,109,12,"universityJson"],[91,28,109,26],[91,31,109,29],[91,37,109,35,"AsyncStorage"],[91,49,109,47],[91,50,109,47,"default"],[91,57,109,47],[91,58,109,48,"getItem"],[91,65,109,55],[91,66,109,56],[91,78,109,68],[91,79,109,69],[92,8,111,6],[92,12,111,10,"token"],[92,17,111,15],[92,21,111,19,"userJson"],[92,29,111,27],[92,33,111,31,"universityJson"],[92,47,111,45],[92,49,111,47],[93,10,112,8],[93,16,112,14,"user"],[93,20,112,18],[93,23,112,21,"JSON"],[93,27,112,25],[93,28,112,26,"parse"],[93,33,112,31],[93,34,112,32,"userJson"],[93,42,112,40],[93,43,112,41],[94,10,113,8],[94,16,113,14,"university"],[94,26,113,24],[94,29,113,27,"JSON"],[94,33,113,31],[94,34,113,32,"parse"],[94,39,113,37],[94,40,113,38,"universityJson"],[94,54,113,52],[94,55,113,53],[95,10,115,8,"set"],[95,13,115,11],[95,14,115,12],[96,12,116,10,"user"],[96,16,116,14],[97,12,117,10,"token"],[97,17,117,15],[98,12,118,10,"university"],[98,22,118,20],[99,12,119,10,"isAuthenticated"],[99,27,119,25],[99,29,119,27],[99,33,119,31],[100,12,120,10,"isLoading"],[100,21,120,19],[100,23,120,21],[101,10,121,8],[101,11,121,9],[101,12,121,10],[102,8,122,6],[102,9,122,7],[102,15,122,13],[103,10,123,8,"set"],[103,13,123,11],[103,14,123,12],[104,12,123,14,"isLoading"],[104,21,123,23],[104,23,123,25],[105,10,123,31],[105,11,123,32],[105,12,123,33],[106,8,124,6],[107,6,125,4],[107,7,125,5],[107,8,125,6],[107,15,125,13,"error"],[107,20,125,18],[107,22,125,20],[108,8,126,6,"console"],[108,15,126,13],[108,16,126,14,"error"],[108,21,126,19],[108,22,126,20],[108,51,126,49],[108,53,126,51,"error"],[108,58,126,56],[108,59,126,57],[109,8,127,6,"set"],[109,11,127,9],[109,12,127,10],[110,10,127,12,"isLoading"],[110,19,127,21],[110,21,127,23],[111,8,127,29],[111,9,127,30],[111,10,127,31],[112,6,128,4],[113,4,129,2],[114,2,130,0],[114,3,130,1],[114,4,130,2],[114,5,130,3],[115,0,130,4],[115,3]],"functionMap":{"names":["<global>","create$argument_0","setUser","logout","updateUser","set$argument_0","loadFromStorage"],"mappings":"AAA;8CCqC;WCO;GDY;UEE;GFsC;cGE;QCC;MDE;GHC;mBKE;GLwB;EDC"},"hasCjsExports":false},"type":"js/module"}]}