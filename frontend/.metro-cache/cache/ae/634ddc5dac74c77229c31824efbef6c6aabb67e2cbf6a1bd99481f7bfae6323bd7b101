{"dependencies":[{"name":"zustand","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":33,"index":33}}],"key":"POPvx7yS3Y3wz+S/9OAefiXNs0Q=","exportNames":["*"],"imports":1}},{"name":"@react-native-async-storage/async-storage","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":35},"end":{"line":2,"column":69,"index":104}}],"key":"0kSRlooyBOaYM9tlTtK91nq+uds=","exportNames":["*"],"imports":1}},{"name":"expo-router","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":106},"end":{"line":3,"column":37,"index":143}}],"key":"/+ErnBisjrT6aDU+GRp5Qz/lYoY=","exportNames":["*"],"imports":1}},{"name":"react-native-web/dist/exports/Platform","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"dV3bI3NOD8bfMzaIniMaFGy/nn8=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  Object.defineProperty(exports, \"useAuthStore\", {\n    enumerable: true,\n    get: function () {\n      return useAuthStore;\n    }\n  });\n  var _zustand = require(_dependencyMap[0], \"zustand\");\n  var _reactNativeAsyncStorageAsyncStorage = require(_dependencyMap[1], \"@react-native-async-storage/async-storage\");\n  var AsyncStorage = _interopDefault(_reactNativeAsyncStorageAsyncStorage);\n  var _expoRouter = require(_dependencyMap[2], \"expo-router\");\n  var _reactNativeWebDistExportsPlatform = require(_dependencyMap[3], \"react-native-web/dist/exports/Platform\");\n  var Platform = _interopDefault(_reactNativeWebDistExportsPlatform);\n  const useAuthStore = (0, _zustand.create)(set => ({\n    user: null,\n    university: null,\n    token: null,\n    isLoading: true,\n    isAuthenticated: false,\n    setUser: async (user, token, university) => {\n      if (token) await AsyncStorage.default.setItem('authToken', token);\n      await AsyncStorage.default.setItem('user', JSON.stringify(user));\n      if (university) await AsyncStorage.default.setItem('university', JSON.stringify(university));\n      set({\n        user,\n        token,\n        university,\n        isAuthenticated: true,\n        isLoading: false\n      });\n    },\n    logout: async () => {\n      try {\n        const token = await AsyncStorage.default.getItem('authToken');\n        console.log('Logout started, token exists:', !!token);\n\n        // Get the correct API URL based on platform\n        const API_URL = Platform.default.OS === 'web' ? 'http://localhost:8001' : 'http://192.168.217.1:8001';\n\n        // Call backend logout API to invalidate token\n        if (token) {\n          try {\n            const response = await fetch(`${API_URL}/api/auth/logout`, {\n              method: 'POST',\n              headers: {\n                'Content-Type': 'application/json',\n                'Authorization': `Bearer ${token}`\n              }\n            });\n            console.log('Logout API response:', response.status);\n          } catch (apiError) {\n            console.log('Backend logout error (non-blocking):', apiError);\n          }\n        }\n\n        // Clear all stored data\n        await AsyncStorage.default.removeItem('authToken');\n        await AsyncStorage.default.removeItem('user');\n        await AsyncStorage.default.removeItem('university');\n        console.log('Cleared AsyncStorage');\n\n        // Reset zustand state\n        set({\n          user: null,\n          token: null,\n          university: null,\n          isAuthenticated: false,\n          isLoading: false\n        });\n        console.log('State reset complete');\n\n        // Reset navigation stack\n        setTimeout(() => {\n          _expoRouter.router.replace('/auth/login');\n        }, 100);\n      } catch (error) {\n        console.error('Logout Error:', error);\n        throw error;\n      }\n    },\n    updateUser: updatedUser => {\n      set(state => ({\n        user: state.user ? Object.assign({}, state.user, updatedUser) : null\n      }));\n    },\n    loadFromStorage: async () => {\n      try {\n        const token = await AsyncStorage.default.getItem('authToken');\n        const userJson = await AsyncStorage.default.getItem('user');\n        const universityJson = await AsyncStorage.default.getItem('university');\n        if (token && userJson && universityJson) {\n          const user = JSON.parse(userJson);\n          const university = JSON.parse(universityJson);\n          set({\n            user,\n            token,\n            university,\n            isAuthenticated: true,\n            isLoading: false\n          });\n        } else {\n          set({\n            isLoading: false\n          });\n        }\n      } catch (error) {\n        console.error('Error loading from storage:', error);\n        set({\n          isLoading: false\n        });\n      }\n    }\n  }));\n});","lineCount":124,"map":[[12,2,39,0,"Object"],[12,8,39,0],[12,9,39,0,"defineProperty"],[12,23,39,0],[12,24,39,0,"exports"],[12,31,39,0],[13,4,39,0,"enumerable"],[13,14,39,0],[14,4,39,0,"get"],[14,7,39,0],[14,18,39,0,"get"],[14,19,39,0],[15,6,39,0],[15,13,39,0,"useAuthStore"],[15,25,39,0],[16,4,39,0],[17,2,39,0],[18,2,1,0],[18,6,1,0,"_zustand"],[18,14,1,0],[18,17,1,0,"require"],[18,24,1,0],[18,25,1,0,"_dependencyMap"],[18,39,1,0],[19,2,2,0],[19,6,2,0,"_reactNativeAsyncStorageAsyncStorage"],[19,42,2,0],[19,45,2,0,"require"],[19,52,2,0],[19,53,2,0,"_dependencyMap"],[19,67,2,0],[20,2,2,0],[20,6,2,0,"AsyncStorage"],[20,18,2,0],[20,21,2,0,"_interopDefault"],[20,36,2,0],[20,37,2,0,"_reactNativeAsyncStorageAsyncStorage"],[20,73,2,0],[21,2,3,0],[21,6,3,0,"_expoRouter"],[21,17,3,0],[21,20,3,0,"require"],[21,27,3,0],[21,28,3,0,"_dependencyMap"],[21,42,3,0],[22,2,3,37],[22,6,3,37,"_reactNativeWebDistExportsPlatform"],[22,40,3,37],[22,43,3,37,"require"],[22,50,3,37],[22,51,3,37,"_dependencyMap"],[22,65,3,37],[23,2,3,37],[23,6,3,37,"Platform"],[23,14,3,37],[23,17,3,37,"_interopDefault"],[23,32,3,37],[23,33,3,37,"_reactNativeWebDistExportsPlatform"],[23,67,3,37],[24,2,39,7],[24,8,39,13,"useAuthStore"],[24,20,39,25],[24,23,39,28],[24,27,39,28,"create"],[24,35,39,34],[24,36,39,34,"create"],[24,42,39,34],[24,44,39,47,"set"],[24,47,39,50],[24,52,39,56],[25,4,40,2,"user"],[25,8,40,6],[25,10,40,8],[25,14,40,12],[26,4,41,2,"university"],[26,14,41,12],[26,16,41,14],[26,20,41,18],[27,4,42,2,"token"],[27,9,42,7],[27,11,42,9],[27,15,42,13],[28,4,43,2,"isLoading"],[28,13,43,11],[28,15,43,13],[28,19,43,17],[29,4,44,2,"isAuthenticated"],[29,19,44,17],[29,21,44,19],[29,26,44,24],[30,4,46,2,"setUser"],[30,11,46,9],[30,13,46,11],[30,19,46,11,"setUser"],[30,20,46,18,"user"],[30,24,46,22],[30,26,46,24,"token"],[30,31,46,29],[30,33,46,31,"university"],[30,43,46,41],[30,48,46,46],[31,6,47,4],[31,10,47,8,"token"],[31,15,47,13],[31,17,47,15],[31,23,47,21,"AsyncStorage"],[31,35,47,33],[31,36,47,33,"default"],[31,43,47,33],[31,44,47,34,"setItem"],[31,51,47,41],[31,52,47,42],[31,63,47,53],[31,65,47,55,"token"],[31,70,47,60],[31,71,47,61],[32,6,48,4],[32,12,48,10,"AsyncStorage"],[32,24,48,22],[32,25,48,22,"default"],[32,32,48,22],[32,33,48,23,"setItem"],[32,40,48,30],[32,41,48,31],[32,47,48,37],[32,49,48,39,"JSON"],[32,53,48,43],[32,54,48,44,"stringify"],[32,63,48,53],[32,64,48,54,"user"],[32,68,48,58],[32,69,48,59],[32,70,48,60],[33,6,49,4],[33,10,49,8,"university"],[33,20,49,18],[33,22,49,20],[33,28,49,26,"AsyncStorage"],[33,40,49,38],[33,41,49,38,"default"],[33,48,49,38],[33,49,49,39,"setItem"],[33,56,49,46],[33,57,49,47],[33,69,49,59],[33,71,49,61,"JSON"],[33,75,49,65],[33,76,49,66,"stringify"],[33,85,49,75],[33,86,49,76,"university"],[33,96,49,86],[33,97,49,87],[33,98,49,88],[34,6,51,4,"set"],[34,9,51,7],[34,10,51,8],[35,8,52,6,"user"],[35,12,52,10],[36,8,53,6,"token"],[36,13,53,11],[37,8,54,6,"university"],[37,18,54,16],[38,8,55,6,"isAuthenticated"],[38,23,55,21],[38,25,55,23],[38,29,55,27],[39,8,56,6,"isLoading"],[39,17,56,15],[39,19,56,17],[40,6,57,4],[40,7,57,5],[40,8,57,6],[41,4,58,2],[41,5,58,3],[42,4,60,2,"logout"],[42,10,60,8],[42,12,60,10],[42,18,60,10,"logout"],[42,19,60,10],[42,24,60,22],[43,6,61,4],[43,10,61,8],[44,8,62,6],[44,14,62,12,"token"],[44,19,62,17],[44,22,62,20],[44,28,62,26,"AsyncStorage"],[44,40,62,38],[44,41,62,38,"default"],[44,48,62,38],[44,49,62,39,"getItem"],[44,56,62,46],[44,57,62,47],[44,68,62,58],[44,69,62,59],[45,8,63,6,"console"],[45,15,63,13],[45,16,63,14,"log"],[45,19,63,17],[45,20,63,18],[45,51,63,49],[45,53,63,51],[45,54,63,52],[45,55,63,53,"token"],[45,60,63,58],[45,61,63,59],[47,8,65,6],[48,8,66,6],[48,14,66,12,"API_URL"],[48,21,66,19],[48,24,66,22,"Platform"],[48,32,66,30],[48,33,66,30,"default"],[48,40,66,30],[48,41,66,31,"OS"],[48,43,66,33],[48,48,66,38],[48,53,66,43],[48,56,66,46],[48,79,66,69],[48,82,66,72],[48,109,66,99],[50,8,68,6],[51,8,69,6],[51,12,69,10,"token"],[51,17,69,15],[51,19,69,17],[52,10,70,8],[52,14,70,12],[53,12,71,10],[53,18,71,16,"response"],[53,26,71,24],[53,29,71,27],[53,35,71,33,"fetch"],[53,40,71,38],[53,41,71,39],[53,44,71,42,"API_URL"],[53,51,71,49],[53,69,71,67],[53,71,71,69],[54,14,72,12,"method"],[54,20,72,18],[54,22,72,20],[54,28,72,26],[55,14,73,12,"headers"],[55,21,73,19],[55,23,73,21],[56,16,74,14],[56,30,74,28],[56,32,74,30],[56,50,74,48],[57,16,75,14],[57,31,75,29],[57,33,75,31],[57,43,75,41,"token"],[57,48,75,46],[58,14,76,12],[59,12,77,10],[59,13,77,11],[59,14,77,12],[60,12,78,10,"console"],[60,19,78,17],[60,20,78,18,"log"],[60,23,78,21],[60,24,78,22],[60,46,78,44],[60,48,78,46,"response"],[60,56,78,54],[60,57,78,55,"status"],[60,63,78,61],[60,64,78,62],[61,10,79,8],[61,11,79,9],[61,12,79,10],[61,19,79,17,"apiError"],[61,27,79,25],[61,29,79,27],[62,12,80,10,"console"],[62,19,80,17],[62,20,80,18,"log"],[62,23,80,21],[62,24,80,22],[62,62,80,60],[62,64,80,62,"apiError"],[62,72,80,70],[62,73,80,71],[63,10,81,8],[64,8,82,6],[66,8,84,6],[67,8,85,6],[67,14,85,12,"AsyncStorage"],[67,26,85,24],[67,27,85,24,"default"],[67,34,85,24],[67,35,85,25,"removeItem"],[67,45,85,35],[67,46,85,36],[67,57,85,47],[67,58,85,48],[68,8,86,6],[68,14,86,12,"AsyncStorage"],[68,26,86,24],[68,27,86,24,"default"],[68,34,86,24],[68,35,86,25,"removeItem"],[68,45,86,35],[68,46,86,36],[68,52,86,42],[68,53,86,43],[69,8,87,6],[69,14,87,12,"AsyncStorage"],[69,26,87,24],[69,27,87,24,"default"],[69,34,87,24],[69,35,87,25,"removeItem"],[69,45,87,35],[69,46,87,36],[69,58,87,48],[69,59,87,49],[70,8,88,6,"console"],[70,15,88,13],[70,16,88,14,"log"],[70,19,88,17],[70,20,88,18],[70,42,88,40],[70,43,88,41],[72,8,90,6],[73,8,91,6,"set"],[73,11,91,9],[73,12,91,10],[74,10,92,8,"user"],[74,14,92,12],[74,16,92,14],[74,20,92,18],[75,10,93,8,"token"],[75,15,93,13],[75,17,93,15],[75,21,93,19],[76,10,94,8,"university"],[76,20,94,18],[76,22,94,20],[76,26,94,24],[77,10,95,8,"isAuthenticated"],[77,25,95,23],[77,27,95,25],[77,32,95,30],[78,10,96,8,"isLoading"],[78,19,96,17],[78,21,96,19],[79,8,97,6],[79,9,97,7],[79,10,97,8],[80,8,98,6,"console"],[80,15,98,13],[80,16,98,14,"log"],[80,19,98,17],[80,20,98,18],[80,42,98,40],[80,43,98,41],[82,8,100,6],[83,8,101,6,"setTimeout"],[83,18,101,16],[83,19,101,17],[83,25,101,23],[84,10,102,8,"router"],[84,21,102,14],[84,22,102,14,"router"],[84,28,102,14],[84,29,102,15,"replace"],[84,36,102,22],[84,37,102,23],[84,50,102,36],[84,51,102,37],[85,8,103,6],[85,9,103,7],[85,11,103,9],[85,14,103,12],[85,15,103,13],[86,6,105,4],[86,7,105,5],[86,8,105,6],[86,15,105,13,"error"],[86,20,105,18],[86,22,105,20],[87,8,106,6,"console"],[87,15,106,13],[87,16,106,14,"error"],[87,21,106,19],[87,22,106,20],[87,37,106,35],[87,39,106,37,"error"],[87,44,106,42],[87,45,106,43],[88,8,107,6],[88,14,107,12,"error"],[88,19,107,17],[89,6,108,4],[90,4,109,2],[90,5,109,3],[91,4,111,2,"updateUser"],[91,14,111,12],[91,16,111,15,"updatedUser"],[91,27,111,26],[91,31,111,31],[92,6,112,4,"set"],[92,9,112,7],[92,10,112,9,"state"],[92,15,112,14],[92,20,112,20],[93,8,113,6,"user"],[93,12,113,10],[93,14,113,12,"state"],[93,19,113,17],[93,20,113,18,"user"],[93,24,113,22],[93,27,113,22,"Object"],[93,33,113,22],[93,34,113,22,"assign"],[93,40,113,22],[93,45,113,30,"state"],[93,50,113,35],[93,51,113,36,"user"],[93,55,113,40],[93,57,113,45,"updatedUser"],[93,68,113,56],[93,72,113,61],[94,6,114,4],[94,7,114,5],[94,8,114,6],[94,9,114,7],[95,4,115,2],[95,5,115,3],[96,4,117,2,"loadFromStorage"],[96,19,117,17],[96,21,117,19],[96,27,117,19,"loadFromStorage"],[96,28,117,19],[96,33,117,31],[97,6,118,4],[97,10,118,8],[98,8,119,6],[98,14,119,12,"token"],[98,19,119,17],[98,22,119,20],[98,28,119,26,"AsyncStorage"],[98,40,119,38],[98,41,119,38,"default"],[98,48,119,38],[98,49,119,39,"getItem"],[98,56,119,46],[98,57,119,47],[98,68,119,58],[98,69,119,59],[99,8,120,6],[99,14,120,12,"userJson"],[99,22,120,20],[99,25,120,23],[99,31,120,29,"AsyncStorage"],[99,43,120,41],[99,44,120,41,"default"],[99,51,120,41],[99,52,120,42,"getItem"],[99,59,120,49],[99,60,120,50],[99,66,120,56],[99,67,120,57],[100,8,121,6],[100,14,121,12,"universityJson"],[100,28,121,26],[100,31,121,29],[100,37,121,35,"AsyncStorage"],[100,49,121,47],[100,50,121,47,"default"],[100,57,121,47],[100,58,121,48,"getItem"],[100,65,121,55],[100,66,121,56],[100,78,121,68],[100,79,121,69],[101,8,123,6],[101,12,123,10,"token"],[101,17,123,15],[101,21,123,19,"userJson"],[101,29,123,27],[101,33,123,31,"universityJson"],[101,47,123,45],[101,49,123,47],[102,10,124,8],[102,16,124,14,"user"],[102,20,124,18],[102,23,124,21,"JSON"],[102,27,124,25],[102,28,124,26,"parse"],[102,33,124,31],[102,34,124,32,"userJson"],[102,42,124,40],[102,43,124,41],[103,10,125,8],[103,16,125,14,"university"],[103,26,125,24],[103,29,125,27,"JSON"],[103,33,125,31],[103,34,125,32,"parse"],[103,39,125,37],[103,40,125,38,"universityJson"],[103,54,125,52],[103,55,125,53],[104,10,127,8,"set"],[104,13,127,11],[104,14,127,12],[105,12,128,10,"user"],[105,16,128,14],[106,12,129,10,"token"],[106,17,129,15],[107,12,130,10,"university"],[107,22,130,20],[108,12,131,10,"isAuthenticated"],[108,27,131,25],[108,29,131,27],[108,33,131,31],[109,12,132,10,"isLoading"],[109,21,132,19],[109,23,132,21],[110,10,133,8],[110,11,133,9],[110,12,133,10],[111,8,134,6],[111,9,134,7],[111,15,134,13],[112,10,135,8,"set"],[112,13,135,11],[112,14,135,12],[113,12,135,14,"isLoading"],[113,21,135,23],[113,23,135,25],[114,10,135,31],[114,11,135,32],[114,12,135,33],[115,8,136,6],[116,6,137,4],[116,7,137,5],[116,8,137,6],[116,15,137,13,"error"],[116,20,137,18],[116,22,137,20],[117,8,138,6,"console"],[117,15,138,13],[117,16,138,14,"error"],[117,21,138,19],[117,22,138,20],[117,51,138,49],[117,53,138,51,"error"],[117,58,138,56],[117,59,138,57],[118,8,139,6,"set"],[118,11,139,9],[118,12,139,10],[119,10,139,12,"isLoading"],[119,19,139,21],[119,21,139,23],[120,8,139,29],[120,9,139,30],[120,10,139,31],[121,6,140,4],[122,4,141,2],[123,2,142,0],[123,3,142,1],[123,4,142,2],[123,5,142,3],[124,0,142,4],[124,3]],"functionMap":{"names":["<global>","create$argument_0","setUser","logout","setTimeout$argument_0","updateUser","set$argument_0","loadFromStorage"],"mappings":"AAA;8CCsC;WCO;GDY;UEE;iBCyC;ODE;GFM;cIE;QCC;MDE;GJC;mBME;GNwB;EDC"},"hasCjsExports":false},"type":"js/module"}]}